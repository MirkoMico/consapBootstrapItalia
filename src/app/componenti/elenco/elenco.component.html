<app-navbar></app-navbar>
  <!-- <app-filtri></app-filtri> -->
  <!-- <app-filtri (filtriCambiati)="($event)"></app-filtri> -->
  <app-percorso [breadcrumbNames]="['Home', 'Elenco']"></app-percorso>


<article  >
    
  <div class="it-header-slim-left-zone" >Elenco <span class="badge bg-primary">Richieste</span></div>
  </article>
  <p></p>
 
<!-- ------filtri------
 -->
 
  <div class="dropdown dropstart text-center ">
  <a class="btn btn-dropdown dropdown-toggle" role="button" id="dropdownMenuDropleft" 
    data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" (click)="apriDropdown()" style="color: #fff;">
    <svg class="icon-expand icon icon-sm icon-light" *ngIf="!isDropdownOpen"><use href="#it-expand"></use></svg>
    <svg class="icon-collapse icon icon-sm icon-light" *ngIf="isDropdownOpen"><use href="#it-collapse"></use></svg>
    {{ isDropdownOpen ? 'Chiudi Filtri' : 'Apri Filtri' }}
  </a>
  <div class="dropdown-menu2" id="dropdown-menu2" aria-labelledby="dropdownMenuDropleft" [hidden]="!isDropdownOpen">
    <div class="link-list-wrapper">
      <ul className="link-list">
          <div className="d-flex">

              <div class="row">

                  <div class="col-md-3">
                      <label for="numeroTicketFiltro" style="color: #fff;">Numero Ticket</label>
                      <input type="text" id="numeroTicketFiltro"  class="form-control"  placeholder="Inserisci numero ticket" 
                      maxlength="5" oninput="this.value = this.value.replace(/[^0-9]/g, '')" >
                  </div>

                  <div class="col-md-6">
                      <label for="oggettoFiltro" style="color: #fff;">Oggetto</label>
                      <input type="text" id="oggettoFiltro"  class="form-control" placeholder="Inserisci oggetto" >
                  </div>
                  <div class="col-md-3">
                      <label for="applicativoFiltro" style="color: #fff;">Applicativo</label>
                      <select id="applicativoFiltro" class="form-control custom-select"  >
                          <option disabled selected hidden value="" href="#it-password-visible">- Selezione Applicativo -
                              
                          </option>
                          
                           <ng-container *ngFor="let app of applicativo">
                              <option value="{{app.applicativoId}}">
                                  {{ app.descApplicativo }}
                              </option>
                          </ng-container> 
          
                      </select>

                     
                  </div>
                 
      </div>

      <div class="row">
          <div class="col-md-3">
              <label for="statoRichiestaConsapFiltro" style="color: #fff;">Stato Richiesta Consap</label>
              <select id="statoRichiestaConsapFiltro" class="form-control custom-select" >
                  <option disabled selected hidden value="">- Selezione Stato Richiesta Consap -</option>
                   <ng-container *ngFor="let app of statoRichiestaConsap">
                      <option value="{{app.statoRichiestaConsapId}}">
                          {{ app.descStatoRichiestaConsap }}
                      </option>
                  </ng-container> 
  
              </select>
          </div>

          <div class="col-md-3">
              <label for="statoRichiestaOsFiltro" style="color: #fff;">Stato Richiesta Os</label>
              <select id="statoRichiestaOsFiltro" class="form-control custom-select" >
                  <option disabled selected hidden value="">- Selezione Stato Richiesta Os -</option>
                   <ng-container *ngFor="let app of statoRichiestaOs">
                      <option value="{{app.statoRichiestaOsId}}">
                          {{ app.descStatoRichiestaOs }}
                      </option>
                  </ng-container> 
  
              </select>
          </div>

          <div class="col-md-3">
              <label for="statoApprovazioneConsapFiltro" style="color: #fff;">Stato Approvazione Consap</label>
              <select id="statoApprovazioneConsapFiltro" class="form-control custom-select" >
                  <option disabled selected hidden value="">- Selezione Stato Approvazione Consap-</option>
                  <ng-container *ngFor="let app of statoApprovazioneConsap">
                      <option value="{{app.statoApprovazioneConsapId}}">
                          {{ app.descStatoApprovazioneConsap }}
                      </option>
                  </ng-container> 
  
              </select>
          </div>

          <div class="col-md-3">
              <label for="statoApprovazioneOsFiltro" style="color: #fff;">Stato Approvazione OS</label>
              <select id="statoApprovazioneOsFiltro" class="form-control custom-select" style="color: black;">
                  <option disabled selected hidden value="">- Selezione Stato Approvazione OS -</option>
                   <ng-container *ngFor="let app of statoApprovazioneOs">
                      <option value="{{app.statoApprovazioneOsId}}">
                          {{ app.descStatoApprovazioneOs }}
                      </option>
                  </ng-container> 
  
              </select>
          </div>

      </div>


      


      


</div>
<p></p>

<div class="row">

<div class="text-center mt-3">
  <button class="btn btn-primary"   
   (click)="filtraRichieste()" >Filtra</button>
</div>
<p></p>
<div className="text-center mt-3">
  <button class="btn btn-primary"   
(click)="ripristinaFiltro()"  >Repristina Filtra</button>
</div>

</div>
      </ul>
    </div>
  </div>
</div> 


<!-- ---------fine filtri--------- -->
<div *ngIf="!loading || !showSpinner">


 <!--  -----sfondo------- -->

   <!-- <section class="it-hero-wrapper it-dark it-overlay"> 
     <div class="img-responsive-wrapper">
      <div class="img-responsive">
        <div class="img-wrapper">
          <img src="">

        </div>

      </div>

    </div>  -->

   <!--  ----fine sfondo-------- -->

   

   



<table class="table table-striped table-hover table-success ">
  
    <thead>
      <tr >
        <!-- <th scope="col">#</th> -->
        <th scope="col" (click)="richiestePostTicketOrdinato()">Numero Ticket <svg class="icon icon-primary cursore" ><use href="#it-expand" ></use></svg></th>
        <th scope="col">Applicativo</th>
        <th scope="col">Oggetto</th>
       <!--  <th scope="col">Data Creazione <svg class="icon icon-primary" ><use href="#it-expand" ></use></svg></th> -->
       <th scope="col">Data Creazione <svg class="icon icon-primary cursore" (click)="changeDataPag();"><use href="#it-expand"></use></svg></th>

       <!--  <th scope="col">Stato Richiesta Consap</th> -->
        <th scope="col">Azioni</th>
        
      </tr>
    </thead>
    <tbody>
        <tr *ngFor="let richiesta of richieste">
            <td>{{richiesta.numeroTicket}}</td>
            <td>{{richiesta.applicativo.descApplicativo}}</td>
            <td>{{richiesta.oggetto}}</td>
           
            <td>{{richiesta.dataCreazione}}</td>
          <!--   <td>{{richiesta.statoRichiestaConsap.descStatoRichiestaConsap}}</td> -->
            <th><button type="button"  class="btn btn-block btn-outline-primary btn-sm" (click)="redirectVisualizza(richiesta)">Visualizza</button>
            
            
            <button type="button"  class="btn btn-block btn-outline-primary btn-sm" (click)="redirectModifica(richiesta)">Modifica</button></th> 
           <!--   <th><button type="button"  class="btn btn-block btn-outline-success btn-sm" >Modifica</button></th>  --> 
           

        </tr>
    </tbody>
  </table>

 <!--  --------page---------- -->
  <nav class="pagination-wrapper" aria-label="Esempio di navigazione con page changer">
  <ul class="pagination">

    <li class="page-item active">
      <a class="page-link"  aria-current="page">
        <span class="d-inline-block d-sm-none">Pagina </span>Pag: {{currentPage}} di {{totalPages}}
      </a>
    </li>



    <li class="page-item cursore" (click)="paginaPrecedente()" >
      <a class="page-link" >
        <svg class="icon icon-primary"><use href="#it-chevron-left" ></use></svg>
        <span class="visually-hidden" >Pagina precedente</span>
      </a>
    </li>
    <li class="page-item cursore"><a class="page-link cursore" value="1" (click)="prendiNumeroPagina($event)" >1</a></li>
    <li class="page-item"><span class="page-link">...</span></li>
    
    <li class="page-item active">
      <a class="page-link"  aria-current="page">
        <span class="d-inline-block d-sm-none">Pagina </span>{{currentPage}}
      </a>
    </li>
    
    <li class="page-item"><span class="page-link">...</span></li>
    <li class="page-item cursore"><a class="page-link"   (click)="prendiNumeroPagina($event)" >{{totalPages}}</a></li>
    <li class="page-item cursore" >
      <a class="page-link" (click)="paginaSuccessiva()">
        <span class="visually-hidden" >Pagina successiva</span>
        <svg class="icon icon-primary"><use href="#it-chevron-right"></use></svg>
      </a>
    </li>
  </ul>
  <div class="dropdown3">
    <button class="btn btn-dropdown dropdown-toggle" type="button"  data-bs-toggle="dropdown"
     aria-haspopup="true" aria-expanded="false" aria-label="Salta alla pagina" (click)="apriChiudiDropdown()" >
    {{paginaSelezionata}}
    <svg class="icon icon-outline-primary icon-sm" ><use href="#it-expand"></use></svg>
    </button>
    <div class="dropdown-menu" aria-labelledby="pagerChanger" id="pagerChanger" >
      <div class="link-list-wrapper">
        <ul class="link-list">
           <li><a class="list-item active cursore "  value="5" (click)="cambiaDimensionePagina($event);apriChiudiDropdown()" aria-current="page" ><span>5/pagina</span></a></li>
           <li><a class="dropdown-item list-item cursore" value="10" (click)="cambiaDimensionePagina($event);apriChiudiDropdown()"><span>10/pagina</span></a></li>
           <li><a class="dropdown-item list-item cursore" value="20" (click)="cambiaDimensionePagina($event); apriChiudiDropdown()"><span>20/pagina</span></a></li>
        
        </ul>
      </div>
    </div>
  </div>
</nav> 




 <!-- --------finePage------ -->


<!-- </section>  -->
 
</div>

<!-- -------------spinner--------- -->

  <div class="container centrato">
    <div class="row">
      <div class="col-12 col-lg-12 mt-3 mt-lg-0" *ngIf="loading">
        <br><br>
        <br><br>
        <br><br>
        <br><br>
        <p class="mb-3"><strong>Sto caricando le richieste...</strong></p>
        
        <div class="progress-spinner progress-spinner-active size-xl">
          <span class="visually-hidden">Sto preparando i dati...</span>
        </div>
        <br><br>
        <br><br>
        <br><br>
        <br><br>
      </div>
    </div>
  </div>
  
 

 <!--  --------spinner----------
   -->
